(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{51:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return R}));var r=n(0),c=n.n(r),a=n(15),o=n.n(a),s=(n(38),n(12)),i=n(6),l=n(14),u=n.n(l),d=n(17),m=n(9),j=n(3),p=n(10),b=n(11),h=n(1);var f=Object(j.g)((function(e){var t=e.login,n=e.history,c=Object(r.useState)({accountNumber:"",password:""}),a=Object(m.a)(c,2),o=a[0],l=a[1],j=function(){var e=Object(d.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),t(o).then((function(e){e.success&&(n.push("/accoutDashBoard"),b.b.success("Login successful."))})).catch((function(e){(new Error).message=e.text,alert(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e){e.preventDefault();var t=e.target,n=t.name,r=t.value;l((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(s.a)({},n,r))}))};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{children:"Welcome To Gold Bank."}),Object(h.jsx)("h2",{children:"Kindly input your login details to sign in"}),Object(h.jsxs)("form",{onSubmit:j,children:[Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{type:"number",name:"accountNumber",min:"0",className:"form-control",placeholder:"Account/Phone Number",value:o.fullName,onChange:f,required:!0})}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{type:"password",name:"password",className:"form-control",placeholder:"Password",value:o.fullName,onChange:f,required:!0})}),Object(h.jsxs)("div",{className:"action-items",children:[Object(h.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Login"}),Object(h.jsx)(p.b,{className:"btn btn-outline-primary",to:"/signup",children:"Sign Up"})]})]})]})}));function y(e){var t=e.signup,n=Object(r.useState)({fullName:"",contact:"",gender:"",password:"",confirmPassword:""}),c=Object(m.a)(n,2),a=c[0],o=c[1],l=Object(r.useState)(!1),u=Object(m.a)(l,2),d=u[0],b=u[1],f=function(e){e.preventDefault();var t=e.target,n=t.name,r=t.value;o((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(s.a)({},n,r))}))};return Object(h.jsxs)(h.Fragment,{children:[d&&Object(h.jsx)(j.a,{to:"/login"}),Object(h.jsx)("h1",{children:"Welcome"}),Object(h.jsx)("h2",{children:"Kindly sign up to own an account with us today."}),Object(h.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),a.password!==a.confirmPassword)return alert("Passwords do not match"),!1;t(a).then((function(e){b(e)})).catch((function(e){(new Error).message=e.text,alert(e)}))},children:[Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{type:"text",name:"fullName",className:"form-control",placeholder:"Full Name",value:a.fullName,onChange:f,required:!0})}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{type:"number",name:"contact",className:"form-control",placeholder:"Phone Number",value:a.contact,onChange:f,required:!0})}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsxs)("select",{className:"form-control",name:"gender",value:a.gender,onChange:f,required:!0,children:[Object(h.jsx)("option",{value:"",hidden:!0,children:"Select a gender"}),Object(h.jsx)("option",{value:"male",children:"Male"}),Object(h.jsx)("option",{value:"female",children:"Female"}),Object(h.jsx)("option",{value:"undisclosed",children:"Prefer not to say"})]})}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{type:"password",name:"password",className:"form-control",placeholder:"Password",value:a.password,onChange:f})}),Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("input",{type:"password",name:"confirmPassword",className:"form-control",placeholder:"Confirm Password",value:a.confirmPassword,onChange:f})}),Object(h.jsxs)("div",{className:"action-items",children:[Object(h.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Sign Up"}),Object(h.jsx)(p.b,{className:"btn btn-outline-primary",to:"/login",children:"Login"})]})]})]})}var g="GET_CLIENT_INFO",O="GET_CLIENT_LIST",v="REMOVE_CLIENT_LIST",x={accountBalance:null,accountNumber:null,fullName:null,gender:null,lastloggedIn:null,_id:null,transactionHistory:[]},N=[];function T(e){return{type:g,payload:e}}var w=function(e){return function(t){return fetch("/transfer",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)}).then((function(e){if(e.ok)return e;console.log("An error occured "+e.text);var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t})).then((function(e){return e.json()})).then((function(e){return t(T(e)),t({type:v}),!0})).catch((function(e){throw new Error(e.message)}))}};function C(){var e=(new Date).getHours();return e<12||0===e?"Good morning":e<16?"Good afternoon":"Good evening"}var E=function(){return localStorage.getItem("user_token")},L=n(23),H=n.n(L);var M=Object(j.g)((function(e){var t=e.info,n=e.history,c=e.logout,a=Object(r.useState)({accountBalance:null,accountNumber:null,fullName:null,gender:null,lastloggedIn:null,_id:null}),o=Object(m.a)(a,2),s=o[0],i=o[1],l=Object(r.useState)(!1),u=Object(m.a)(l,2),d=u[0],p=u[1];return Object(r.useEffect)((function(){i(t)}),[t]),Object(h.jsxs)(h.Fragment,{children:[d&&Object(h.jsx)(j.a,{to:"/sendMoney"}),Object(h.jsx)("h1",{children:"Gold Bank"}),Object(h.jsxs)("h2",{children:[C(),", ",s.fullName]}),Object(h.jsxs)("p",{children:["Account #",Object(h.jsx)("b",{children:s.accountNumber})]}),Object(h.jsxs)("h3",{children:["Account Balance: =N= ",Object(h.jsx)("b",{children:s.accountBalance})]}),Object(h.jsx)("button",{className:"btn btn-primary",onClick:function(){p(!0)},children:"Send Money"}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)("button",{className:"btn btn-primary",onClick:function(){document.getElementById("transactHistoryDebit").style.display="none",document.getElementById("transactHistoryCredit").style.display="none";var e=document.getElementById("transactHistory");if(e.style.display="block",0===t.transactionHistory.length)return""===e.innerHTML&&void(e.innerHTML="There are no entries to display.");if(""===e.innerHTML||"There are no entries to display."===e.innerHTML){var n=document.createElement("h2");return n.innerHTML="Transaction History",e.appendChild(n),void t.transactionHistory.forEach((function(t,n){e.innerHTML+="<div key=".concat(n,' class="card transactionContainer mb-3" style="width: 18rem">\n              <ul class="list-group transactionList">\n                <li class="list-group-item">').concat(H()(t.Date,"dd/mmm/yyyy HH:MM"),'</li>\n                <li class="list-group-item">').concat(t.Type,'</li>\n                <li class="list-group-item">').concat(t.AcctNum,'</li>\n                <li class="list-group-item">').concat(t.Amount,'</li>\n                <li class="list-group-item">').concat(t.Narration,"</li>\n              </ul>\n            </div>\n            ")}))}return!1},children:"View Account Statement"}),"\xa0",Object(h.jsx)("button",{className:"btn btn-primary",onClick:function(){document.getElementById("transactHistory").style.display="none",document.getElementById("transactHistoryCredit").style.display="none";var e=document.getElementById("transactHistoryDebit");e.style.display="block";var n=t.transactionHistory.filter((function(e){return"Transaction type: Dr"===e.Type}));if(0===n.length)return""===e.innerHTML&&void(e.innerHTML="There are no entries to display.");if(""===e.innerHTML||"There are no entries to display."===e.innerHTML){var r=document.createElement("h2");return r.innerHTML="Debit Transactions",e.appendChild(r),void n.forEach((function(t,n){e.innerHTML+="<div key=".concat(n,' class="card transactionContainer mb-3" style="width: 18rem">\n              <ul class="list-group transactionList">\n                <li class="list-group-item">').concat(H()(t.Date,"dd/mmm/yyyy HH:MM"),'</li>\n                <li class="list-group-item">').concat(t.Type,'</li>\n                <li class="list-group-item">').concat(t.AcctNum,'</li>\n                <li class="list-group-item">').concat(t.Amount,'</li>\n                <li class="list-group-item">').concat(t.Narration,"</li>\n              </ul>\n            </div>\n            ")}))}return!1},children:"View All Debit Transaction"}),"\xa0",Object(h.jsx)("button",{className:"btn btn-primary",onClick:function(){document.getElementById("transactHistory").style.display="none",document.getElementById("transactHistoryDebit").style.display="none";var e=document.getElementById("transactHistoryCredit");e.style.display="block";var n=t.transactionHistory.filter((function(e){return"Transaction type: Cr"===e.Type}));if(0===n.length)return""===e.innerHTML&&void(e.innerHTML="There are no entries to display.");if(""===e.innerHTML||"There are no entries to display."===e.innerHTML){var r=document.createElement("h2");return r.innerHTML="Credit Transactions",e.appendChild(r),void n.forEach((function(t,n){e.innerHTML+="<div key=".concat(n,' class="card transactionContainer mb-3" style="width: 18rem">\n              <ul class="list-group transactionList">\n                <li class="list-group-item">').concat(H()(t.Date,"dd/mmm/yyyy HH:MM"),'</li>\n                <li class="list-group-item">').concat(t.Type,'</li>\n                <li class="list-group-item">').concat(t.AcctNum,'</li>\n                <li class="list-group-item">').concat(t.Amount,'</li>\n                <li class="list-group-item">').concat(t.Narration,"</li>\n              </ul>\n            </div>\n            ")}))}return!1},children:"View All Credit Transaction"}),"\xa0",Object(h.jsx)("button",{className:"btn btn-danger",onClick:function(){c(),n.push("/"),b.b.success("You've been logged out successfully.")},children:"Log out"}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)("div",{id:"transactHistory"}),Object(h.jsx)("div",{id:"transactHistoryDebit"}),Object(h.jsx)("div",{id:"transactHistoryCredit"})]})}));function k(e){var t=e.senderInfo,n=e.sendMoney,c=e.viewUsersList,a=e.usersList,o=Object(r.useState)({benAcctNum:"",benFullName:"",amount:"",narration:""}),l=Object(m.a)(o,2),u=l[0],d=l[1],p=Object(r.useState)(!1),f=Object(m.a)(p,2),y=f[0],g=f[1];Object(r.useEffect)((function(){var e=document.getElementById("usersList");if(e.style.display="none",""!==e.innerHTML)return e.style.display="block",!1;0!==a.length&&a.forEach((function(t,n){e.innerHTML+="<div key=".concat(n,' class="card transactionContainer mb-3" style="width: 18rem">\n            <ul class="list-group transactionList">\n              <li class="list-group-item">Name: ').concat(t.name,'</li>\n              <li class="list-group-item">AccountNumber: ').concat(t.accountNumber,"</li>\n            </ul>\n          </div>\n          ")})),e.style.display="block"}));var O=function(e){var t=e.target.value,n=e.target.name;d((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(s.a)({},n,t))}))};return Object(h.jsxs)(h.Fragment,{children:[y&&Object(h.jsx)(j.a,{to:"/accoutDashBoard"}),Object(h.jsx)("h1",{children:"Gold Bank"}),Object(h.jsx)("h2",{children:"Transfer Funds"}),Object(h.jsxs)("form",{children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("input",{type:"number",name:"benAcctNum",className:"form-control",placeholder:"Destination Account Number",value:u.benAcctNum,onChange:O,required:!0}),Object(h.jsx)("input",{type:"text",name:"benFullName",className:"form-control",placeholder:"Receipient Account Name",value:u.benFullName,readOnly:!0}),Object(h.jsx)("input",{type:"number",name:"amount",className:"form-control",placeholder:"Amount to transfer",value:u.amount,onChange:O,required:!0}),Object(h.jsx)("input",{type:"text",name:"narration",className:"form-control",placeholder:"Narration",value:u.narration,onChange:O})]}),Object(h.jsxs)("div",{className:"action-items",children:[Object(h.jsx)("button",{className:"btn btn-primary",type:"submit",onClick:function(e){if(e.preventDefault(),""===u.benAcctNum||""===u.amount)return b.b.error("Beneficiary name and amount cannot be empty.",{autoClose:6e3}),!1;if(t.accountBalance<u.amount)return alert("Insufficient funds"),!1;var r={senderId:t._id,receipient:Object(i.a)({},u)};n(r)&&(b.b.success("Transfer Successful"),g(!0))},children:"Transfer"}),Object(h.jsx)("button",{className:"btn btn-outline-primary",onClick:function(){c()},children:"View List of Registered Users"})]})]}),Object(h.jsx)("div",{id:"usersList"})]})}var A=n(22),I=(n(46),n(5)),S=Object(I.a)();var D=Object(A.b)((function(e){return{loggedInClient:e.loggedInClient,usersList:e.updateClientListDataReducer}}),(function(e){return{login:function(t){return e((n=t,function(e){return fetch("/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(n)}).then((function(e){if(e.ok)return e;throw console.log("An error occured "+e.text),new Error("Error: "+e.statusText)})).then((function(e){return e.json()})).then((function(t){return localStorage.setItem("user_token",t.authToken),e(T(t)),{success:!0}})).catch((function(e){var t=new Error(e.message);return alert(t),{success:!1}}))}));var n},sendMoney:function(t){return e(w(t))},signup:function(t){return e((n=t,function(e){return fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(n)}).then((function(e){if(e.ok)return!0;throw console.log("An error occured "+e.text),new Error("Error: "+e.statusText)})).catch((function(e){throw new Error(e.message)}))}));var n},logout:function(){return e((function(e){return fetch("/logout",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+E()}}).then((function(e){if(e.ok)return e;throw console.log("An error occured "+e.text),new Error("Error: "+e.statusText)})).then((function(e){return e.json()})).then((function(t){return localStorage.removeItem("user_token"),e(T(x)),{success:!0}})).catch((function(e){var t=new Error(e.message);return alert(t),{success:!1}}))}))},viewUserList:function(){return e(function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/viewRegisteredUsers",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,t({type:O,payload:r}),e.abrupt("return",r);case 11:e.prev=11,e.t0=e.catch(0),c=new Error(e.t0.message),alert(c);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())}}}))((function(e){var t=e.login,n=e.sendMoney,r=e.loggedInClient,c=e.signup,a=e.logout,o=e.viewUserList,s=e.usersList;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(b.a,{position:"top-right",autoClose:3e3,hideProgressBar:!0}),Object(h.jsx)(p.a,{children:Object(h.jsxs)(j.d,{children:[Object(h.jsx)(j.b,{path:"/login",component:function(){return Object(h.jsx)(f,{login:t})}}),Object(h.jsx)(j.b,{path:"/signup",component:function(){return Object(h.jsx)(y,{signup:c})}}),Object(h.jsx)(j.b,{path:"/sendMoney",component:function(){return Object(h.jsx)(k,{sendMoney:n,viewUsersList:o,senderInfo:r.clientData,usersList:s})}}),Object(h.jsx)(j.b,{path:"/accoutDashBoard",exact:!0,component:function(){return Object(h.jsx)(M,{info:r.clientData,logout:a})}}),Object(h.jsx)(j.b,{path:"/",exact:!0,component:function(){return Object(h.jsx)(f,{login:t})}}),Object(h.jsx)(j.a,{to:"/"})]})})]})}));var B=function(){return Object(h.jsx)("div",{className:"container",children:Object(h.jsx)(D,{})})},_=n(13),P=n(31);var F=n(33);var G=Object(_.c)({loggedInClient:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clientData:x},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(i.a)(Object(i.a)({},e),{},{clientData:t.payload});default:return e}},updateClientListDataReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(F.a)(t.payload);case v:return N;default:return e}}}),U=n(32),q=n.n(U);var R=function(e){var t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||_.d;return Object(_.e)(G,e,t(Object(_.a)(P.a,q()())))}();!function(){var e=localStorage.getItem("user_token"),t=window.location.pathname;e?(R.dispatch(function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/getProfile",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+E()}});case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,t(T(r)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),c=new Error(e.t0.message),alert(c);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()),"/accoutDashBoard"!==t&&"/sendMoney"!==t?S.push("/"):S.push(t)):S.push("/")}(),o.a.render(Object(h.jsx)(A.a,{store:R,children:Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(B,{})})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.2329bbcb.chunk.js.map